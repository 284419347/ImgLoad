<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>

window.onload= function () {
//给滚动元素绑定单击事件
    document.getElementById('test5').addEventListener('click',function(){
        returnToTop();
    });
}
//缓动函数
var Tween = {
    Cubic: {
        easeIn: function(t, b, c, d) {
            return c * (t /= d) * t * t + b;
        },
        easeOut: function(t, b, c, d) {
            return c * ((t = t/d - 1) * t * t + 1) + b;
        },
        easeInOut: function(t, b, c, d) {
            if ((t /= d / 2) < 1) return c / 2 * t * t*t + b;
            return c / 2*((t -= 2) * t * t + 2) + b;
        }
    }
}

//t: current time（当前时间）；
//b: beginning value（初始值）；
//c: change in value（变化量）；
//d: duration（持续时间）。

// b:可以这么理解，手动设置元素运动的初始状态。比如说某个div的width，当还没执行这个函数时是0.如果设置了b=50.那么在执行函数一开始width立刻被设置为50。
// d:控制变化的时间。值越大，动画运行越慢
// c:变化量，比如width，如果设置b=50，c=900,初始状态下，
// 这个缓动函数第一次执行元素的width就被赋予50px宽度，然后到变化停止状态，又变化了900px
// 所以最后这个元素的宽度是950px。
// t:个人理解是变化中间状态时间，即当前时间，拿动漫作比喻，我们没人喜欢重头到尾的看。
// 原因是一遍又一遍的片头歌曲，已经按捺不住看剧情的心了。于是我们选择在固定时间播放，
// 直接进入剧情。那么前面的动画就没了，希望你们能领悟，不能的自己试试便知。
var b=0,c=900,d=600,t=0;
        function Run(){
            document.getElementById('test0').style.width
                    = Math.ceil(Tween.Cubic.easeOut(t,b,c,d)) + "px";

            var color=Math.ceil(Tween.Cubic.easeOut(t,0,255,500));
            document.getElementById('test1').style.backgroundColor
                    = 'rgb('+color+','+color+','+color+')';

            document.getElementById('test2').style.height
                    = Math.ceil(Tween.Cubic.easeOut(t,0,50,500))+'px';

            document.getElementById('test3').style.left
                    = Math.ceil(Tween.Cubic.easeOut(t,0,850,500))+'px';

            document.getElementById('test4').style.left
                    = 850-Math.ceil(Tween.Cubic.easeOut(t,0,850,500))+'px';
            if(t<500){ t++; setTimeout(Run, 10); }
        }

    </script>
    <style>
        body{
            background-color: blanchedalmond;
        }
    </style>
</head>
<body>
<style>
    #test0{height: 50px;border: 1px solid deepskyblue}
    #test1{height: 50px;width:900px;border: 1px solid darkcyan}
    #test2{width:900px;border: 1px solid darkcyan}
    #test3{position: absolute;height: 50px; width:50px;border: 1px solid darkcyan}
    #test4{right: 0; position: absolute;height: 50px; width:50px;border: 1px solid darkcyan}
    #test5{position: fixed;right: 50px;bottom: 30px;height: 37px;width: 37px;border: 1px solid aqua;background-color: deepskyblue}
</style>
<p>width</p>
<div id="test0"></div>

<p>background-color</p>
<div id="test1"></div>

<p>height</p>
<div id="test2"></div>

<div style="top: 323px;position: absolute;">

    <p>left&right</p>
    <div style="" id="test3"></div>
    <div style="" id="test4"></div>

    <div style="height: 900px;width: 1px;margin: 150px;">制造高度用于滚动测试</div>
    <p>写个简单的返回顶部效果</p>
</div>

<div id="test5">
    返回 <br/> 顶部
</div>

<script>
    //置顶
    var curtime=0;
    var dur=80;
    var start=30;

    function returnToTop(){
        //获取滚动条到顶部距离。
        var begin = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
        //这是“置顶”div的bottom样式。
        document.getElementById('test5').style.bottom
                =Math.ceil(Tween.Cubic.easeIn(curtime,start,1000,dur))+'px';//ceil，英文意思天花板，用于整数进一取整。
        //执行js元素滚动函数,便于理解。第一个参数表示水平坐标，第二参数表示纵坐标。
        //第二参数解释：每次执行都将 begin-缓动函数返回的值 。特效就有了。
        //如果放在坐标上来看，大家还记我们高中学过的二次函数曲线坐标图吧，没错就是这么的感觉。
        window.scrollTo(0,begin-Math.ceil(Tween.Cubic.easeIn(curtime,0,begin,20)));
        if(curtime<dur){ curtime++; setTimeout(returnToTop, 10); }//用时间来判断什么时候终止递归函数
    }
//end-置顶

    Run();
</script>
</body>
</html>